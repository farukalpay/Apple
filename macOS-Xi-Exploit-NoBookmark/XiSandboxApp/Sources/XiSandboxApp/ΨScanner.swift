import Foundation

enum PsiScanner {

    /// Verilen yolu okuyup sandbox durumunu raporlar.
    static func run(path: String) {
        let url = URL(fileURLWithPath: path)
        let pid = getpid()

        print("""
        ðŸ”Ž PsiScanner activated
          PID: \(pid)
          Target Path: \(url.path)
        """)

        guard FileManager.default.fileExists(atPath: url.path) else {
            print("âŒ File does not exist.")
            return
        }

        do {
            let data = try Data(contentsOf: url)
            print("âœ… Îž minted â€¢ \(data.count) bytes read")
        } catch {
            print("âŒ Îž failed: \(error.localizedDescription)")
        }

        let sandboxed = isSandboxed()
        print("  Sandbox status: \(sandboxed ? "ðŸ”’ Sandboxed" : "ðŸ”“ Not sandboxed")")
    }

    // MARK: â€“ Helper
    private static func isSandboxed() -> Bool {
        ProcessInfo.processInfo.environment["APP_SANDBOX_CONTAINER_ID"] != nil
    }
}

