import Foundation

struct Î¨Scanner {
    static func analyze(path: String) {
        let fileURL = URL(fileURLWithPath: path)
        let pid = ProcessInfo.processInfo.processIdentifier
        print("ðŸ”Ž Î¨Scanner activated")
        print("  PID: \(pid)")
        print("  Target Path: \(fileURL.path)")

        guard FileManager.default.fileExists(atPath: fileURL.path) else {
            print("âŒ File does not exist.")
            return
        }

        do {
            let data = try Data(contentsOf: fileURL)
            print("âœ… Îž minted: File read succeeded. Size: \(data.count) bytes")
        } catch {
            print("âŒ Îž failed: Cannot read file. Error: \(error.localizedDescription)")
        }

        let sandbox = isSandboxed()
        print("  Sandbox status: \(sandbox ? "ðŸ”’ Sandboxed" : "ðŸ”“ Not sandboxed")")
    }

    static func isSandboxed() -> Bool {
        let env = ProcessInfo.processInfo.environment
        return env["APP_SANDBOX_CONTAINER_ID"] != nil
    }
}

// MARK: - Entry Point

let args = CommandLine.arguments
guard args.count == 2 else {
    print("Usage: ./Î¨Scanner <absolute-file-path>")
    exit(1)
}

Î¨Scanner.analyze(path: args[1])
